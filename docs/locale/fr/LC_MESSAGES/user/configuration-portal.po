# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2015, Julien Enselme, Bruno Friedmann, Véronique Herzl
# This file is distributed under the same license as the Documentation for
# geo-front3, geo-api3 and geo-infra package.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2016.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: Documentation for geo-front3, geo-api3 and geo-infra "
"1.0.0\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2016-09-14 11:12+0200\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 2.3.4\n"

#: ../../user/configuration-portal.rst:2
msgid "Configuration of a portal"
msgstr ""

#: ../../user/configuration-portal.rst
msgid "Contents"
msgstr ""

#: ../../user/configuration-portal.rst:10
msgid "Layers from external sources"
msgstr ""

#: ../../user/configuration-portal.rst:12
msgid ""
"In ``customer-infra/json/<portal_name>/external``, you can add JSON files"
" describing layers from external WMS or WMTS servers. These files must "
"have the following attributes:"
msgstr ""

#: ../../user/configuration-portal.rst:14
msgid "name"
msgstr ""

#: ../../user/configuration-portal.rst:15
msgid "resolutions (WMTS only)"
msgstr ""

#: ../../user/configuration-portal.rst:16
msgid "timeEnabled (WMTS only)"
msgstr ""

#: ../../user/configuration-portal.rst:17
msgid "timestamps (WMTS only)"
msgstr ""

#: ../../user/configuration-portal.rst:18
msgid "type"
msgstr ""

#: ../../user/configuration-portal.rst:19
msgid "wmsUrl (WMS only)"
msgstr ""

#: ../../user/configuration-portal.rst:20
msgid "matrixSet (WMTS only)"
msgstr ""

#: ../../user/configuration-portal.rst:22
msgid "They can have the following optional attributes:"
msgstr ""

#: ../../user/configuration-portal.rst:24
msgid "label (default: name)"
msgstr ""

#: ../../user/configuration-portal.rst:25
msgid "attribution (default: empty)"
msgstr ""

#: ../../user/configuration-portal.rst:26
msgid "attributionUrl (default: empty)"
msgstr ""

#: ../../user/configuration-portal.rst:27
msgid "hasLegend (default: false)"
msgstr ""

#: ../../user/configuration-portal.rst:28
msgid "legend (default: empty)"
msgstr ""

#: ../../user/configuration-portal.rst:29
msgid "format (default: png)"
msgstr ""

#: ../../user/configuration-portal.rst:30
msgid "opacity (default: 1)"
msgstr ""

#: ../../user/configuration-portal.rst:31
msgid "queryable (default: false)"
msgstr ""

#: ../../user/configuration-portal.rst:32
msgid "serverLayerName (default: name)"
msgstr ""

#: ../../user/configuration-portal.rst:33
msgid "wmsLayers (default: name, WMS only)"
msgstr ""

#: ../../user/configuration-portal.rst:34
msgid ""
"crossOrigin: (default: null, possible: ``\"undefined\"`` WMS only). If "
"the value is set to ``\"undefined\"``, this will force OpenLayers to "
"discard cross origin information. This can be useful when you import an "
"external WMS layer and encounter cross origin problems."
msgstr ""

#: ../../user/configuration-portal.rst:35
msgid "background (default: false)"
msgstr ""

#: ../../user/configuration-portal.rst:36
msgid "timeBehaviour (default: last, WMTS only)"
msgstr ""

#: ../../user/configuration-portal.rst:39
msgid "Example JSON file for external WMS layer"
msgstr ""

#: ../../user/configuration-portal.rst:61
msgid "Example JSON file for external WMTS layer"
msgstr ""

#: ../../user/configuration-portal.rst:94
msgid "Translations"
msgstr ""

#: ../../user/configuration-portal.rst:96
msgid ""
"Translations for a portal are located in the four files listed below. All"
" these files must have this header: ``key,fr,de,en,commentaires``. The "
"content of the ``commentaires`` column will be ignored. You can off "
"course add/remove language columns."
msgstr ""

#: ../../user/configuration-portal.rst:98
msgid ""
"`The translation document managed by Swisstopo "
"<https://docs.google.com/spreadsheets/d/1F3R46w4PODfsbJq7jd79sapy3B7TXhQcYM7SEaccOA0/edit?pli=1#gid=0>`__."
msgstr ""

#: ../../user/configuration-portal.rst:99
msgid ""
"``customer-infra/translations/catalog.csv``: the content of the catalog, "
"common to all portals. This includes the layer names present in the "
"catalog and the title of the section of the catalog."
msgstr ""

#: ../../user/configuration-portal.rst:100
msgid ""
"``customer-infra/translations/<portal-name>.csv``: everything else "
"(*note:* the translation for the topic titles and the topic tooltip – "
"*topic_<topic_name>_tooltip* – go here)."
msgstr ""

#: ../../user/configuration-portal.rst:101
msgid ""
"``customer-infra/translations/common.csv`` (optional): if you find "
"redundancies between the translations for different portals, you can put "
"them in this file. It will be loaded before the file for the portal, "
"which means, you can override a translation from this file in a portal "
"file."
msgstr ""

#: ../../user/configuration-portal.rst:105
msgid ""
"**At least one of the files above must contain a translation line.** "
"Otherwise, no layers config will be created. Which means your portal "
"won't work."
msgstr ""

#: ../../user/configuration-portal.rst:107
msgid ""
"Translation from Swisstopo are overridden by translations in "
"``common.csv`` and translation from both Swisstopo and ``common.csv`` are"
" overridden by translations from ``<portal>.csv``. To ignore a "
"translation from Swisstopo, put its id in the ``customer-"
"infra/translations/ignore.csv`` file. This file must just contain the "
"translation ids (one per line). You can view an example `here "
"<https://github.com/ioda-net/customer-"
"infra/blob/master/translations/ignore.csv>`__."
msgstr ""

#: ../../user/configuration-portal.rst:111
msgid "ids present in ``ignore.csv`` will never get into a translation file."
msgstr ""

#: ../../user/configuration-portal.rst:117
msgid "Topics"
msgstr ""

#: ../../user/configuration-portal.rst:119
msgid ""
"Topics are defined in JSON files located in ``customer-"
"infra/json/<portal>/topics/<topic_name>.json``. They must contains the "
"keys below:"
msgstr ""

#: ../../user/configuration-portal.rst:121
msgid ""
"``backgroundLayers``: the list of background layer ids for this topic in "
"the order they will appear in the background selector. For instance:"
msgstr ""

#: ../../user/configuration-portal.rst:127
msgid ""
"``langs``: the list of languages for which this topic is available. For "
"instance:"
msgstr ""

#: ../../user/configuration-portal.rst:133
msgid "``name``: the name of the topic. For instance:"
msgstr ""

#: ../../user/configuration-portal.rst:139
msgid ""
"This is what must be used in translation files to translate the topic "
"name."
msgstr ""

#: ../../user/configuration-portal.rst:141
msgid ""
"``catalog``: defines the layers available for this topic and how they "
"will be displayed. You can simply use a list of layer ids to have a "
"catalog without depth. For instance:"
msgstr ""

#: ../../user/configuration-portal.rst:150
msgid ""
"But you can also use a list of objects to group layers into categories. "
"These objects must have the following keys:"
msgstr ""

#: ../../user/configuration-portal.rst:152
msgid "``category`` (string): can be anything but ``root`` and ``layer``."
msgstr ""

#: ../../user/configuration-portal.rst:153
msgid ""
"``selectedOpen`` (boolean): if it is true, then the group will be opened "
"by default when the user expands the catalog for this topic."
msgstr ""

#: ../../user/configuration-portal.rst:154
msgid "``children``: it can be either:"
msgstr ""

#: ../../user/configuration-portal.rst:156
msgid ""
"a list of layer ids. In this case, the layers will be presented to the "
"user at this level."
msgstr ""

#: ../../user/configuration-portal.rst:157
msgid ""
"a list of objects with the same properties as the ones in the catalog. "
"This allows you to create subcategories."
msgstr ""

#: ../../user/configuration-portal.rst:159
#: ../../user/configuration-portal.rst:324
msgid "For instance:"
msgstr ""

#: ../../user/configuration-portal.rst:181
msgid "You can also use the optional keys below:"
msgstr ""

#: ../../user/configuration-portal.rst:183
msgid ""
"``activatedLayers`` (default: empty list): the layers whose id is listed "
"here will be in the *Map Displayed* selector by won't be selected. This "
"allows you to put layers in the selector while hiding them by default. "
"For instance:"
msgstr ""

#: ../../user/configuration-portal.rst:189
msgid ""
"``selectedLayers`` (default: empty list): the layers whose id is listed "
"here will be in the *Map Displayed* selector and will be selected. This "
"allows you to preselect some layers for a topic. For instance:"
msgstr ""

#: ../../user/configuration-portal.rst:197
msgid "Search"
msgstr ""

#: ../../user/configuration-portal.rst:199
msgid ""
"Searches are performed by the API and `Sphinx search "
"<http://sphinxsearch.com/>`__ a full text search engine."
msgstr ""

#: ../../user/configuration-portal.rst:201
msgid "The configuration for sphinx is divided in two parts:"
msgstr ""

#: ../../user/configuration-portal.rst:203
msgid ""
"global configuration for an infrastructure: it configures the "
"configuration of the sphinx daemon. It can be updated with ``manuel "
"generate-search-conf``. The templates used to generate this configuration"
" are located in ``geo-infra/search``."
msgstr ""

#: ../../user/configuration-portal.rst:204
msgid "portal configuration: it configures the layer and locations searches:"
msgstr ""

#: ../../user/configuration-portal.rst:206
msgid ""
"locations searches: the configuration is created by a template located in"
" ``customer-infra/search/portal-locations.in.conf``. To help you write "
"this template, you can also create dedicated views in the database. See "
"the :ref:`schema section in the database page <ref_sysadmin_db_schemas-"
"functions_schemas_optional-schemas_schema-search>` of the system "
"administrator manuel for more information on this. This template can look"
" like:"
msgstr ""

#: ../../user/configuration-portal.rst:210
msgid ""
"layers searches: the configuration is created by a template located in "
"``geo-infra/search/common/search-layers.in.conf``. The information used "
"to build the indexes are stored in one TSV files per language in "
"``customer-infra/<type>/<portal>/search``. These TSV files are generated "
"automatically when you build a portal."
msgstr ""

#: ../../user/configuration-portal.rst:213
msgid "Configure search keywords"
msgstr ""

#: ../../user/configuration-portal.rst:215
msgid ""
"By default, when the user does a search, the ``portal_locations`` index "
"will be used. So the results will come from all your location indexes. "
"However, if the user put in front of his/her search text a keyword, like "
"this ``keywork search string``, then the results will be filtered. This "
"allows your users to get more precise results."
msgstr ""

#: ../../user/configuration-portal.rst:217
msgid "For instance, if a portal have these indexes:"
msgstr ""

#: ../../user/configuration-portal.rst:219
msgid "``<portal>_cities``: plain index built from a query in the database."
msgstr ""

#: ../../user/configuration-portal.rst:220
msgid "``<portal>_buildings``: plain index built from a query in the database."
msgstr ""

#: ../../user/configuration-portal.rst:221
msgid "``<portal>_parcels``: plain index built from a query in the database."
msgstr ""

#: ../../user/configuration-portal.rst:222
msgid ""
"``<portal>_locations``: distributed index regrouping the three indexes "
"above."
msgstr ""

#: ../../user/configuration-portal.rst:224
msgid ""
"When you use the keyword ``address`` in the search bar, you want to "
"search only in the ``portal_cities`` and ``portal_sorted_buildings`` "
"indexes and not the whole ``<portal>_locations`` index since it also "
"contains the parcels. Likewise, when you use the keyword ``parcel`` you "
"want to search only in the ``portal_parcels`` index. This is what "
"keywords are for: you specify a rank for each index and when a keyword is"
" used, the API will filter the results to include only those with the "
"appropriate ranks."
msgstr ""

#: ../../user/configuration-portal.rst:226
msgid "In order to enable a keyword, you must:"
msgstr ""

#: ../../user/configuration-portal.rst:228
msgid "Defined a rank for each location index."
msgstr ""

#: ../../user/configuration-portal.rst:229
msgid ""
"Map the index with their rank in ``customer-"
"infra/config/_common.dist.toml`` and ``geo-"
"api3/config/config.<branchname>.toml`` like this:"
msgstr ""

#: ../../user/configuration-portal.rst:237
msgid "Use this code when you build the search query:"
msgstr ""

#: ../../user/configuration-portal.rst:243
msgid ""
"Add the keyword in the API in ``geo-"
"api3/chsdi/customers/utils/search.py`` (ask a developer to do this). You "
"can point them to :ref:`the relevant section of the developer guide "
"<ref_dev_api_search-keywords>` if needed."
msgstr ""

#: ../../user/configuration-portal.rst:249
msgid "Identify features"
msgstr ""

#: ../../user/configuration-portal.rst:251
msgid ""
"In order to enable a feature view, for a portal, you need to enable it in"
" the ``features.map_layers_features`` table. To do this, add or update a "
"row like this:"
msgstr ""

#: ../../user/configuration-portal.rst:253
msgid "In the column ``feature`` put the name of the feature view."
msgstr ""

#: ../../user/configuration-portal.rst:254
msgid ""
"In the column ``portal_names`` put the table of portals for which the "
"feature view must be available. For instance: ``{demo}``."
msgstr ""

#: ../../user/configuration-portal.rst:255
msgid ""
"In the column ``layer_names`` put the name of the layers for which the "
"feature view must be requested. For instance: ``{roads}``."
msgstr ""

#: ../../user/configuration-portal.rst:257
msgid ""
"Referer to the :ref:`feature section of the database page "
"<ref_sysadmin_db_features>` to learn more how this works in the database "
"and how to create feature views."
msgstr ""

#: ../../user/configuration-portal.rst:262
msgid "Special columns for features"
msgstr ""

#: ../../user/configuration-portal.rst:264
msgid ""
"To be able to render feature columns with another representation than the"
" \"raw\" content coming from the database, it is possible to create "
"custom templates for columns verifying a special pattern. A number of "
"special cases are handled automatically by default:"
msgstr ""

#: ../../user/configuration-portal.rst:266
msgid ""
"``hidden``: if a column name ends with ``_hidden`` it will not be "
"displayed by default. The user can choose to see it if necessary."
msgstr ""

#: ../../user/configuration-portal.rst:267
msgid ""
"``url``: if a column name ends with ``_url`` it will be rendered as an "
"url (useful if the content has to be a valid clickable url). ``_url`` can"
" be combined with ``_hidden`` to hide a URL type column by default like "
"that ``_url_hidden``."
msgstr ""

#: ../../user/configuration-portal.rst:268
msgid ""
"``pdf``: if a column name ends with ``_pdf``, the content will be "
"rendered as a link with a acrobat pdf icon as content. The link generally"
" points to ``/files/FILE.pdf``."
msgstr ""

#: ../../user/configuration-portal.rst:270
msgid ""
"To use these templates, name your columns like this: ``name<pattern>``, "
"eg ``website_url`` or ``boring_hidden``."
msgstr ""

#: ../../user/configuration-portal.rst:272
msgid ""
"To add a new pattern, the code of the frontend needs to be updated. Ask a"
" developer to do this. You can point to the :ref:`relevant section of the"
" documentation <ref_dev_customer_features>`."
msgstr ""

#: ../../user/configuration-portal.rst:278
msgid "Help"
msgstr ""

#: ../../user/configuration-portal.rst:280
msgid ""
"This section explains how the help website and the help available from "
"``geo-front3`` is generated."
msgstr ""

#: ../../user/configuration-portal.rst:282
msgid ""
"The help website is a small static website written using `AngularJS "
"<http://angularjs.org/>`__. It is design to show help to the user of a "
"portal and can be accessed for each one on by appending ``/help`` to the "
"address of a portal. For instance for https://map.geoportal.xyz, "
"https://map.geoportal.xyz/help."
msgstr ""

#: ../../user/configuration-portal.rst:286
msgid "Update the help (images and texts) from Swisstopo"
msgstr ""

#: ../../user/configuration-portal.rst:288
msgid ""
"This rely on the ``scripts/generate_help.py`` python script (not usable "
"directly). This will download the texts for each language supported by "
"Swisstopo from google fusion table in the JSON format. The script will "
"then convert this JSON file to a csv file and save the result in "
"``in/help/swisstopo/texts``."
msgstr ""

#: ../../user/configuration-portal.rst:290
msgid ""
"While fetching the texts, the content is scanned by beautiful soup in "
"order to find all images (these images are used with the ``a`` tag with a"
" ``href`` attribute like ``(?:https?:)?//help.geo.admin.ch/([^ ])``). The"
" links are corrected in order to use images from ``/help/img/``.  These "
"images are converted to PNG and saved in ``in/help/swisstopo/img``."
msgstr ""

#: ../../user/configuration-portal.rst:292
msgid "To do this, use in ``geo-infra``:"
msgstr ""

#: ../../user/configuration-portal.rst:300
msgid ""
"There is no particular way to know if the help was updated by Swisstopo. "
"Launch the update task and git will tell you if anything changed."
msgstr ""

#: ../../user/configuration-portal.rst:304
msgid "Generate the help for a portal"
msgstr ""

#: ../../user/configuration-portal.rst:306
msgid "The script will output the help in two formats:"
msgstr ""

#: ../../user/configuration-portal.rst:308
msgid ""
"One for the help website. The files used are in "
"``<type>/<portal>/help/texts/<lang>.json``."
msgstr ""

#: ../../user/configuration-portal.rst:309
msgid ""
"One for the use within ``geo-front3`` in "
"``<type>/<portal>/help/texts/<id>-<lang>.json``"
msgstr ""

#: ../../user/configuration-portal.rst:311
msgid "All the images are saved in ``<type>/<portal>/help/img``."
msgstr ""

#: ../../user/configuration-portal.rst:313
msgid "In order to generate the texts, the script will:"
msgstr ""

#: ../../user/configuration-portal.rst:315
msgid "Parse the texts from ``geo-infra/help/texts/<lang>.csv``."
msgstr ""

#: ../../user/configuration-portal.rst:316
msgid ""
"Parse the texts from ``customer-infra/help/<portal>/texts/<lang>.csv``. "
"So in order to change a text from Swisstopo, you simply must add a row "
"with the same id in the corresponding language specific file. For "
"instance, in order to change the home page for French for "
"``geoportalxyz``, you must edit ``ioda-"
"infra/help/geportalxyz/texts/fr.csv``. You must then add a line with the "
"id 1. The number from the sort column (second column) must correspond to "
"the one used by Swisstopo. For instance:"
msgstr ""

#: ../../user/configuration-portal.rst:322
msgid ""
"You can ignore a page by putting its id in "
"``in/help/<portal_name>/ignore.csv``."
msgstr ""

#: ../../user/configuration-portal.rst:331
msgid ""
"To create a new language file for a portal, create a ``<lang>.csv`` file "
"in ``customer-infra/help/<portal>/texts`` and put the following header:"
msgstr ""

#: ../../user/configuration-portal.rst:337
msgid "In order to generate the images, the script will:"
msgstr ""

#: ../../user/configuration-portal.rst:339
msgid "Copy the images from ``geo-infra/help/img``."
msgstr ""

#: ../../user/configuration-portal.rst:340
msgid ""
"Copy the images from ``customer-infra/help/<portal>/img``. So to replace "
"an image from Swisstopo, you must add an image with the same name (this "
"include the extension) in ``customer-infra/help/<portal>/img``."
msgstr ""

#: ../../user/configuration-portal.rst:342
msgid ""
"To build the help website (static site and files needed for the help "
"within ``geo-front3``), use in ``geo-infra``:"
msgstr ""

#: ../../user/configuration-portal.rst:349
msgid "Help generation in short"
msgstr ""

#: ../../user/configuration-portal.rst:351
msgid "The content of the site is generated as follows:"
msgstr ""

#: ../../user/configuration-portal.rst:353
msgid "The images from Swisstopo are copied in the destination directory."
msgstr ""

#: ../../user/configuration-portal.rst:354
msgid ""
"The images for the current portal are copied in the destination "
"directory. This means that if an image has the same name as an image from"
" Swisstopo, it will replace it."
msgstr ""

#: ../../user/configuration-portal.rst:355
msgid "The texts from Swisstopo are parsed from their respective csv files."
msgstr ""

#: ../../user/configuration-portal.rst:356
msgid ""
"The texts for a current portal are parsed from its csv files. If a text "
"has the same id as a text from Swisstopo it will replace it. This means "
"that you only have to put the line you want to change into the portal "
"CSV."
msgstr ""

#: ../../user/configuration-portal.rst:360
msgid "Writing help texts"
msgstr ""

#: ../../user/configuration-portal.rst:362
msgid ""
"We advise you to use `LibreOffice <https://www.libreoffice.org/>`__ or "
"equivalent to edit the CSV files. This way you can be sure that the CSV "
"file you save is valid. It will also make editing of big texts easier."
msgstr ""

#: ../../user/configuration-portal.rst:365
msgid "Create links in the help website"
msgstr ""

#: ../../user/configuration-portal.rst:367
msgid ""
"In order to insert link to another page of the website, you must use a "
"``button`` tag with an attribute ``ng-click=\"hc.goto(<id>)\"``. For "
"instance, to insert a link to the page with id 38:"
msgstr ""

#: ../../user/configuration-portal.rst:377
msgid "Plugins"
msgstr ""

#: ../../user/configuration-portal.rst:379
msgid ""
"For features may be available through plugins. To enable a plugin on a "
"portal, add it to the ``plugins`` list of the ``front.default_values`` "
"section. For instance, to enable the plugin named ``test``, your portal "
"config file should contain:"
msgstr ""

#: ../../user/configuration-portal.rst:390
msgid "Print"
msgstr ""

#: ../../user/configuration-portal.rst:392
msgid ""
"Printing a map relies on `MapFish Print <https://github.com/mapfish"
"/mapfish-print>`__ a Java servlet developed by `Camptocamp SA "
"<http://www.camptocamp.com/en/>`__."
msgstr ""

#: ../../user/configuration-portal.rst:394
msgid ""
"You can either build it from scratch from `the source "
"<https://github.com/mapfish/mapfish-print>`__ or use our `last build "
"</data/getting-started/print.war>`__."
msgstr ""

#: ../../user/configuration-portal.rst:396
msgid ""
"You can view examples of print templates `here <https://github.com/ioda-"
"net/customer-infra/tree/master/print>`__. You can create your print "
"templates with `Jasper Studio <http://community.jaspersoft.com/project"
"/jaspersoft-studio>`__ or directly by editing the jrxml files with a text"
" editor."
msgstr ""

